/*! Fabrik */

define(["jquery","fab/list-plugin"],function(t,e){return new Class({Extends:e,options:{},initialize:function(t){this.parent(t),"null"===typeOf(this.options.value)&&(this.options.value=0);var e=this.listform.getElement(".clearFilters");console.log("clear = ",e),e.addEvent("mouseup",function(){this.clearFilter()}.bind(this)),"null"===typeOf(this.listform)||(this.listform=this.listform.getElement("#radius_lookup"+this.options.renderOrder),"null"!==typeOf(this.listform))?"null"!==typeOf(this.listform)&&geo_position_js.init()&&geo_position_js.getCurrentPosition(function(t){this.setGeoCenter(t)}.bind(this),function(t){this.geoCenterErr(t)}.bind(this),{enableHighAccuracy:!0}):fconsole("didnt find element #radius_lookup"+this.options.renderOrder)},setGeoCenter:function(t){this.geocenterpoint=t,this.geoCenter(t)},geoCenter:function(t){"null"===typeOf(t)?window.alert(Joomla.JText._("PLG_VIEW_RADIUS_NO_GEOLOCATION_AVAILABLE")):(this.listform.getElement("input[name=radius_search_lat"+this.options.renderOrder+"]").value=t.coords.latitude.toFixed(2),this.listform.getElement("input[name=radius_search_lon"+this.options.renderOrder+"]").value=t.coords.longitude.toFixed(2))},clearFilter:function(){return this.listform.getElements("select").set("value",""),!0}})});